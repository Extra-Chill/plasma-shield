{
  "id": "fleet-command",
  "name": "Fleet Command",
  "version": "1.0.0",
  "icon": "antenna.radiowaves.left.and.right",
  "description": "Commodore-level fleet management. Monitor agents, control shields, view traffic across the entire armada.",
  "author": "Extra Chill",
  "homepage": "https://github.com/Extra-Chill/plasma-shield",

  "runtime": {
    "type": "shell",
    "runCommand": "./fleet-command.sh",
    "readyCheck": "test -f /var/lib/sweatpants/fleet-registry.yaml"
  },

  "inputs": [
    {
      "id": "view",
      "type": "select",
      "label": "View",
      "default": "agents",
      "options": [
        {"value": "agents", "label": "Fleet Agents"},
        {"value": "shields", "label": "Shield Status"},
        {"value": "traffic", "label": "Traffic Logs"},
        {"value": "rules", "label": "Blocking Rules"}
      ],
      "arg": "--view"
    },
    {
      "id": "agent",
      "type": "text",
      "label": "Agent Filter",
      "placeholder": "Filter by agent name (optional)",
      "arg": "--agent"
    },
    {
      "id": "action",
      "type": "select",
      "label": "Action",
      "default": "none",
      "options": [
        {"value": "none", "label": "View Only"},
        {"value": "lockdown", "label": "Lockdown Agent"},
        {"value": "audit", "label": "Set Audit Mode"},
        {"value": "enforce", "label": "Set Enforce Mode"},
        {"value": "ping", "label": "Ping Agent"}
      ],
      "arg": "--action"
    },
    {
      "id": "limit",
      "type": "stepper",
      "label": "Result Limit",
      "default": 50,
      "min": 10,
      "max": 500,
      "arg": "--limit"
    }
  ],

  "output": {
    "schema": {
      "type": "array",
      "items": {
        "agent": "string",
        "status": "string",
        "mode": "string",
        "ip": "string",
        "shield": "string",
        "last_seen": "string"
      }
    },
    "display": "table",
    "selectable": true
  },

  "actions": [
    {
      "id": "lockdown-selected",
      "label": "ðŸ”’ Lockdown Selected",
      "type": "builtin",
      "builtin": "copy-column",
      "column": "agent"
    },
    {
      "id": "ping-selected",
      "label": "ðŸ“¡ Ping Selected",
      "type": "builtin",
      "builtin": "copy-column",
      "column": "agent"
    },
    {
      "id": "export",
      "label": "Export CSV",
      "type": "builtin",
      "builtin": "export-csv"
    },
    {
      "id": "copy-json",
      "label": "Copy JSON",
      "type": "builtin",
      "builtin": "copy-json"
    }
  ],

  "settings": [
    {
      "id": "fleet_registry",
      "type": "text",
      "label": "Fleet Registry Path",
      "placeholder": "/var/lib/sweatpants/fleet-registry.yaml",
      "default": "/var/lib/sweatpants/fleet-registry.yaml"
    },
    {
      "id": "shield_api",
      "type": "text",
      "label": "Shield Router API",
      "placeholder": "http://shield.example.com:9000",
      "default": ""
    },
    {
      "id": "discord_channel",
      "type": "text",
      "label": "Fleet Discord Channel",
      "placeholder": "Channel ID for fleet comms",
      "default": ""
    }
  ],

  "requires": {}
}
