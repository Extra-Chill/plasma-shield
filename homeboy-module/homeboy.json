{
  "id": "plasma-shield",
  "name": "Plasma Shield",
  "version": "1.0.0",
  "icon": "shield.lefthalf.filled",
  "description": "Network security control for AI agent fleets. Monitor agents, manage rules, and control operating modes.",
  "author": "Extra Chill",
  "homepage": "https://github.com/Extra-Chill/plasma-shield",

  "runtime": {
    "type": "shell",
    "runCommand": "./run.sh {{action}}",
    "readyCheck": "which plasma-shield",
    "setupCommand": "go install github.com/Extra-Chill/plasma-shield/cmd/plasma-shield@latest"
  },

  "inputs": [
    {
      "id": "action",
      "type": "select",
      "label": "Action",
      "default": "status",
      "options": [
        {"value": "status", "label": "Shield Status"},
        {"value": "agents", "label": "List Agents"},
        {"value": "rules", "label": "List Rules"},
        {"value": "logs", "label": "View Traffic Logs"},
        {"value": "mode", "label": "Change Mode"}
      ],
      "arg": ""
    },
    {
      "id": "agent_id",
      "type": "text",
      "label": "Agent ID",
      "placeholder": "Leave empty for global operations",
      "arg": "--agent"
    },
    {
      "id": "mode",
      "type": "select",
      "label": "Mode",
      "default": "enforce",
      "options": [
        {"value": "enforce", "label": "Enforce - Block matching requests"},
        {"value": "audit", "label": "Audit - Log only, never block"},
        {"value": "lockdown", "label": "Lockdown - Block ALL requests"}
      ],
      "arg": "--mode"
    },
    {
      "id": "limit",
      "type": "stepper",
      "label": "Log Limit",
      "default": 50,
      "min": 10,
      "max": 500,
      "arg": "--limit"
    }
  ],

  "output": {
    "schema": {
      "type": "array",
      "items": {
        "timestamp": "string",
        "agent": "string",
        "domain": "string",
        "action": "string",
        "reason": "string"
      }
    },
    "display": "table",
    "selectable": true
  },

  "actions": [
    {
      "id": "copy-domains",
      "label": "Copy Domains",
      "type": "builtin",
      "builtin": "copy-column",
      "column": "domain"
    },
    {
      "id": "export-logs",
      "label": "Export CSV",
      "type": "builtin", 
      "builtin": "export-csv"
    },
    {
      "id": "copy-json",
      "label": "Copy JSON",
      "type": "builtin",
      "builtin": "copy-json"
    }
  ],

  "settings": [
    {
      "id": "api_url",
      "type": "text",
      "label": "Shield Router URL",
      "placeholder": "http://shield.example.com:9000",
      "default": "http://localhost:9000"
    },
    {
      "id": "api_key",
      "type": "text",
      "label": "API Key",
      "placeholder": "Your shield API key (optional)",
      "default": ""
    }
  ],

  "requires": {}
}
